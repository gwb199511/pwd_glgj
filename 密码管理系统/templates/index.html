<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>服务器密码管理系统</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/main.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/layout.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/components.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/modal.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/table.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/responsive.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/animations.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/popup.css') }}">
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script type="module" src="{{ url_for('static', filename='js/main.js') }}"></script>
    <style>
        body {
            background-color: #f4f4f4;
        }
    </style>
</head>
<body>
    <div class="main-container">
        <h1 class="title">服务器密码管理系统</h1>
        <div class="content-wrapper">
            <div id="editModeContent" style="display: none;">
                <h2>添加服务器</h2>
                <form id="addServerForm" class="inline-form">
                    <input type="text" id="ip" placeholder="IP地址" required>
                    <input type="text" id="username" placeholder="用户名" required>
                    <input type="text" id="password" placeholder="密码" required>
                    <input type="text" id="purpose" placeholder="用途">
                    <button type="submit" class="add-server-button">添加</button>
                </form>
                <div class="tooltip" id="ipTooltip" style="display: none;">
                    <span class="tooltip-icon">&#9888;</span>
                    <span class="tooltip-message"></span>
                </div>
            </div>

            <h2>服务器列表</h2>
            <div class="search-container">
                <input type="text" id="searchInput" placeholder="搜索服务器...">
                <button id="searchButton">搜索</button>
            </div>
            <div class="table-container">
                <table id="serverList">
                    <thead>
                        <tr>
                            <th style="text-align: right;"></th>
                            <th>ID</th>
                            <th>IP地址</th>
                            <th class="username-column">用户名</th>
                            <th>密码</th>
                            <th>用途</th>
                            <th>新密码</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>

            <div class="pagination-container"></div>

            <div id="editModeButtons" class="button-container edit-mode-buttons" style="display: none;">
                <button class="generate-button">批量修改密码</button>
                <button class="confirm-button">确认修改</button>
            </div>
        </div>

        <div id="exitEditModeContainer" class="exit-edit-mode-container" style="display: none;">
            <button id="exitEditModeButton" class="exit-edit-mode-button">退出编辑模式</button>
        </div>

        <div class="password-modal" id="passwordModal" style="display: none;">
            <div class="password-modal-content">
                <h3>请输入密码</h3>
                <input type="password" id="editPassword" placeholder="密码">
                <div class="password-modal-buttons">
                    <button id="confirmPasswordButton">确认</button>
                    <button id="cancelPasswordButton">取消</button>
                </div>
            </div>
        </div>

        <div class="tooltip" id="globalTooltip" style="display: none;">
            <span class="tooltip-icon">&#9888;</span>
            <span class="tooltip-message"></span>
        </div>

        <button id="historyButton" class="history-button">历史操作记录</button>
        <div id="historyPopup" class="popup">
            <div class="popup-content">
                <span class="close">&times;</span>
                <h2>历史操作记录</h2>
                <div class="logs-table-container">
                    <table id="logsTable">
                        <thead>
                            <tr>
                                <th>操作时间</th>
                                <th>操作类型</th>
                                <th>详情</th>
                            </tr>
                        </thead>
                        <tbody id="logsContainer"></tbody>
                    </table>
                </div>
                <div id="pagination"></div>
            </div>
        </div>

        <div class="pagination"></div>

        <div id="history-container"></div>

        <button id="editModeButton" class="edit-mode-button">进入编辑模式</button>
    </div>
</body>
</html>